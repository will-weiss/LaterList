require=function t(n,e,i){function r(o,u){if(!e[o]){if(!n[o]){var h="function"==typeof require&&require;if(!u&&h)return h(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var a=e[o]={exports:{}};n[o][0].call(a.exports,function(t){var e=n[o][1][t];return r(e?e:t)},a,a.exports,t,n,e,i)}return e[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(t,n){function e(t,n,e,i){s.call(this,t,n,e,i)}function i(){r.call(this)}var r=t("./LaterList"),s=t("./Listener"),o=t("./utils");o.subClass(s,e,{after:s.prototype.listen}),o.subClass(r,i,{addListener:function(t,n,i){return new e(this,t,n,i)}}),n.exports=i},{"./LaterList":2,"./Listener":3,"./utils":8}],2:[function(t,n){function e(){this._headRef=this._tail=new r,this._state=new s,this.end=this.end.bind(this)}var i=t("./Listener"),r=t("./Node"),s=t("./State"),o=t("./proto"),u=t("./utils");e.prototype.length=0,e.prototype.push=function(t){this._tail=this._tail.next=new r(t,this.length++),this.revive("shift")},e.prototype.revive=function(t,n){for(var e,i=this._state;i.pending;)e=i.pending,i.pending=null,e[t](n),i=e},e.prototype.end=function(t){return this.push=this.end=u.thrower.bind(this,"May not be called on an ended LaterList."),this._state.ended=!0,this._state.error=t,t?this.revive("end",t):this.revive("close")},e.prototype.link=function(t){var n=new this.constructor;return this.addListener(t,n.end,n).value},e.prototype.close=function(){this.addListener=this.close=u.thrower.bind(this,"May not be called on a closed LaterList."),this._headRef=null},e.prototype.consume=function(t,n){var e=this;return new Promise(function(i,r){e.addListener(t,function(t){return t?r(t):i(this.value)},n)})},e.prototype.value=function(){var t=this.consume(i.prototype.push,[]);return this.value=u.constant(t),t},e.from=function(t){var n=this,e=new n;return Promise.resolve(t.forEach(e.push,e)).then(e.end,e.end),e},e.of=function(){var t=this,n=new t;return Array.prototype.forEach.call(arguments,n.push,n),n.end(),n},u.extend(e.prototype,o),n.exports=e},{"./Listener":3,"./Node":4,"./State":6,"./proto":7,"./utils":8}],3:[function(t,n){function e(t,n,e,i){this._state=t._state,this.node=t._headRef,this.onData=n.bind(this),this.onEnd=e.bind(this),this.set(i),this.done=Promise.resolve(),this.pending=null,this.end=this.end.bind(this),this.listen()}var i=t("./utils");e.prototype.listen=function(){var t=this._state;return t.error?this.end(t.error):this.node.next?this.shift():t.ended?this.close():this.pend()},e.prototype.shift=function(){var t=this.node=this.node.next;this.done=Promise.resolve(t.value).then(function(n){return this.onData(n,t.index)}.bind(this)).then(i.constant(this.done),this.end),this.after()},e.prototype.set=function(t){this.value=t},e.prototype.pend=function(){var t=this._state;this.pending=t.pending,t.pending=this},e.prototype.push=function(t){this.value.push(t)},e.prototype.exit=function(t){this.set(t),this.end()},e.prototype.close=function(){this.done.then(this.end,this.end)},e.prototype.end=function(t){this.listen=this.shift=this.set=this.pend=this.push=this.exit=this.close=this.end=i.noop,this.onEnd(t)},n.exports=e},{"./utils":8}],4:[function(t,n){function e(t,n){this.value=t,this.index=n,this.next=null}n.exports=e},{}],5:[function(t,n){function e(t,n,e,i){s.call(this,t,n,e,i)}function i(){r.call(this)}var r=t("./LaterList"),s=t("./Listener"),o=t("./utils");o.subClass(s,e,{after:function(){this.done.then(this.listen.bind(this))}}),o.subClass(r,i,{addListener:function(t,n,i){return new e(this,t,n,i)}}),n.exports=i},{"./LaterList":2,"./Listener":3,"./utils":8}],6:[function(t,n){function e(){this.ended=!1,this.error=null,this.pending=null}n.exports=e},{}],7:[function(t,n,e){var i=t("./Node"),r=t("./utils"),s=t("./Listener").prototype;e.concat=function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),this.constructor.from(t).link(function(t){return t.forEach(this.push,this)})},e.every=function(t,n){return this.consume(r.ternary(t.bind(n),r.noop,function(){this.exit(!1)}),!0)},e.filter=function(t,n){return this.link(r.ternary(t.bind(n),s.push,r.noop))},e.find=function(t,n){return this.consume(r.ternary(t.bind(n),s.exit,r.noop))},e.findIndex=function(t,n){return r.locIndex.call(this,t.bind(n),s.exit)},e.forEach=function(t,n){return this.consume(t.bind(n))},e.includes=function(t){var n=parseInt(arguments[1],10)||0;return this.some(function(e,i){return i>=n&&(t===e||t!==t&&e!==e)})},e.indexOf=function(t){return r.matchIndex.call(this,t,s.exit)},e.join=function(t){return"undefined"==typeof t&&(t=","),this.reduce(function(n,e,i){return n+(i?t:"")+e},"")},e.lastIndexOf=function(t){return r.matchIndex.call(this,t,s.set)},e.map=function(t,n){return this.link(function(e,i){return this.push(t.call(n,e,i))})},e.reduce=function(t,n){return this.consume(function(n,e){this.set(Promise.resolve(this.value).then(function(i){return t(i,n,e)}))},n)},e.reduceRight=function(t,n){return this.reverse().then(function(e){var i=e.length;return e.reduce(function(n,e,r){return t(n,e,i-r)},n)})},e.reverse=function(){var t=this,n=this.length;return this.consume(function(t,e){var r=this.value._headRef,s=new i(t,n-e);s.next=r.next,r.next=s},new this.constructor).then(function(e){var i,r,s=e.length=t.length;if(s-n)for(r=0,i=e._headRef.next;i;)i.index=r++,i=i.next;return e.end(),e})},e.slice=function(t,n){var e=t>=0?parseInt(t,10):0,i=e>=n?0:parseInt(n,10)||1/0,r=i-e;return 0>=r?this.constructor.from([]):this.filter(function(t,n){return e>n||n>=i?!1:--r?!0:(this.push(t),void this.end())})},e.some=function(t,n){return this.consume(r.ternary(t.bind(n),function(){this.exit(!0)},r.noop),!1)},e.sort=function(t){return this.value().then(function(n){var e=n.slice(0);return e.sort(t),this.constructor.from(e)}.bind(this))},e.splice=function(t,n){var e=Array.prototype.slice.call(arguments,2),i=t>=0?parseInt(t,10):0,r=i+(parseInt(n,10)||0);return this.filter(function(t,n){return n===r&&e.forEach(this.push,this),i>n||n>=r})}},{"./Listener":3,"./Node":4,"./utils":8}],8:[function(t,n,e){e.constant=function(t){return function(){return t}},e.extend=function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])},e.locIndex=function(t,n){return this.consume(e.ternary(t,function(t,e){n.call(this,e)},e.noop),-1)},e.matchIndex=function(t,n){return e.locIndex.call(this,function(n){return t===n},n)},e.noop=function(){},e.subClass=function(t,n,i){return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,e.extend(n,t),i&&e.extend(n.prototype,i)},e.ternary=function(t,n,e){return function(i,r){var s=this;return Promise.resolve(t(i,r)).then(function(t){var o=t?n:e;o.call(s,i,r)})}},e.thrower=function(t){throw new Error(t)}},{}],index:[function(t,n){n.exports={LaterList:t("./lib/LaterList"),Relay:t("./lib/Relay"),Flood:t("./lib/Flood")}},{"./lib/Flood":1,"./lib/LaterList":2,"./lib/Relay":5}]},{},[]);