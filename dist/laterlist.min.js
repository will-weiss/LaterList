require=function t(n,e,i){function r(s,u){if(!e[s]){if(!n[s]){var h="function"==typeof require&&require;if(!u&&h)return h(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=e[s]={exports:{}};n[s][0].call(f.exports,function(t){var e=n[s][1][t];return r(e?e:t)},f,f.exports,t,n,e,i)}return e[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,n){function e(){i.call(this)}var i=t("./interface"),r=t("./Listener").Flood,o=t("./utils");o.inherits(e,i,{addListener:function(t,n,e){return new r(this,t,n,e)}}),n.exports=e},{"./Listener":2,"./interface":6,"./utils":8}],2:[function(t,n){function e(t,n,e,i){this._state=t._state,this.node=t._headRef,this.onData=n.bind(this),this.onEnd=e.bind(this),this.set(i),this.done=Promise.resolve(),this.end=this.end.bind(this),this.listen()}function i(t,n,i,r){e.call(this,t,n,i,r)}function r(t,n,i,r){e.call(this,t,n,i,r)}var o=t("./utils");e.prototype.set=function(t){this.value=t},e.prototype.listen=function(){var t=this._state;return t.error?this.end(t.error):this.node.next?this.shift():t.ended?this.close():this.pend()},e.prototype.end=function(t){this.onData=this.set=this.listen=this.end=this.shift=this.close=this.pend=this.exit=this.push=this.setIndex=this.after=o.noop,this.onEnd(t)},e.prototype.shift=function(){var t=this.node=this.node.next;this.done=Promise.resolve(t.value).then(function(n){return this.onData(n,t.index)}.bind(this)).then(o.constant(this.done),this.end),this.after.call(this)},e.prototype.close=function(){return this.done.then(this.end,this.end)},e.prototype.pend=function(){var t=this._state;this.pending=t.pending,t.pending=this},e.prototype.exit=function(t){this.set(t),this.end()},e.prototype.push=function(t){this.value.push(t)},e.prototype.setIndex=function(t,n){this.value[n]=t},o.inherits(i,e,{after:e.prototype.listen}),o.inherits(r,e,{after:function(){this.done.then(this.listen.bind(this))}}),n.exports=e,n.exports.Flood=i,n.exports.Relay=r},{"./utils":8}],3:[function(t,n){function e(){i.call(this)}var i=t("./interface"),r=t("./Listener").Relay,o=t("./utils");o.inherits(e,i,{addListener:function(t,n,e){return new r(this,t,n,e)}}),n.exports=e},{"./Listener":2,"./interface":6,"./utils":8}],4:[function(t,n){function e(t,n){this.value=t,this.index=n,this.next=null}n.exports=e},{}],5:[function(t,n){function e(){this.ended=!1,this.error=null,this.pending=null}t("./Node");n.exports=e},{"./Node":4}],6:[function(t,n){function e(){this._headRef=this._tail=new i(null,-1),this._state=new r,this.end=this.end.bind(this)}var i=t("./Node"),r=t("./State"),o=t("./proto"),s=t("../utils"),u=t("../Listener").prototype,h=Array.prototype.forEach;e.prototype.length=0,e.prototype.push=function(){for(var t=-1,n=arguments.length;++t<n;)this._tail=this._tail.next=new i(arguments[t],this.length++);return this.revive(u.shift),this.length},e.prototype.revive=function(t,n){var e,i=this._state.pending;for(this._state.pending=null;i;)e=i.pending,i.pending=null,t.call(i,n),i=e},e.prototype.end=function(t){var n=t?u.end:u.close;this._state.ended=!0,this._state.error=t,this.push=this.end=s.thrower.bind(this,"May not be called on an ended LaterList."),this.revive(n,t)},e.prototype.link=function(t){var n=new this.constructor;return this.addListener(t,n.end,n).value},e.prototype.close=function(){this.addListener=this.close=this.atIndex=s.thrower.bind(this,"May not be called on a closed LaterList."),this._headRef=null},e.prototype.consume=function(t,n){var e=this;return new Promise(function(i,r){e.addListener(t,function(t){return t?r(t):i(this.value)},n)})},e.prototype.value=function(){var t=[];return t.length=this.length,this.consume(u.setIndex,t)},e.prototype.atIndex=function(t){var n,e=parseInt(t,10);if(!(e>=0&&e<this.length))return void 0;for(n=this._headRef.next;e-->0;)n=n.next;return n.value},e.from=function(t){var n=new this,e=t.forEach(s.pushOne,n);return e?Promise.resolve(e).then(n.end,n.end):n.end(),n},e.of=function(){var t=new this;return h.call(arguments,s.pushOne,t),t.end(),t},s.extend(e.prototype,o),n.exports=e},{"../Listener":2,"../utils":8,"./Node":4,"./State":5,"./proto":7}],7:[function(t,n,e){var i=t("./Node"),r=t("../utils"),o=t("../Listener").prototype,s=Array.prototype.slice;e.concat=function(){var t=s.call(arguments,0);return t.unshift(this),this.constructor.from(t).link(function(t){return t&&"function"==typeof t.forEach?t.forEach(r.pushOne,this):void this.push(t)})},e.every=function(t,n){return this.consume(r.fork(t.bind(n),function(){this.exit(!1)},!0),!0)},e.filter=function(t,n){return this.link(r.fork(t.bind(n),o.push))},e.find=function(t,n){return this.consume(r.fork(t.bind(n),o.exit))},e.findIndex=function(t,n){return r.locIndex.call(this,t.bind(n),o.exit)},e.forEach=function(t,n){return this.consume(t.bind(n))},e.includes=function(t){var n=parseInt(arguments[1],10)||0;return this.some(function(e,i){return i>=n&&(t===e||t!==t&&e!==e)})},e.indexOf=function(t){return r.matchIndex.call(this,t,o.exit)},e.join=function(t){return"undefined"==typeof t&&(t=","),this.reduce(function(n,e,i){return n+(i?t:"")+e},"")},e.lastIndexOf=function(t){return r.matchIndex.call(this,t,o.set)},e.map=function(t,n){return this.link(function(e,i){return this.push(t.call(n,e,i))})},e.reduce=function(t,n){return this.consume(function(n,e){this.set(Promise.resolve(this.value).then(function(i){return t(i,n,e)}))},n)},e.reduceRight=function(t,n){return this.reverse().reduce(t,n)},e.reverse=function(){var t=new this.constructor;return this.consume(function(t){var n=this.value,e=new i(t);e.next=n.next,n.next=e},new i).then(function(n){for(;n=n.next;)t.push(n.value);t.end()},t.end),t},e.slice=function(t,n){var e=t>=0?parseInt(t,10):0,i=e>=n?0:parseInt(n,10)||1/0,r=i-e;return 0>=r?this.constructor.from([]):this.link(function(t,n){e>n||n>=i||(this.push(t),--r||this.end())})},e.some=function(t,n){return this.consume(r.fork(t.bind(n),function(){this.exit(!0)}),!1)},e.sort=function(t){var n=new this.constructor;return this.value().then(function(e){e.sort(t),e.forEach(r.pushOne,n),n.end()},n.end),n},e.splice=function(t,n){var e=arguments.length;if(!e)return this.constructor.from(this);var i,r,o=s.call(arguments,2),u=parseInt(t,10)||0;return 1===e?(i=1/0,r=u):(i=u+(parseInt(n,10)||0),r=1/0),this.link(function(t,n){n===u&&o.forEach(this.push,this),(u>n||n>=i)&&(this.push(t),--r||this.end())})}},{"../Listener":2,"../utils":8,"./Node":4}],8:[function(t,n,e){e.constant=function(t){return function(){return t}},e.extend=function(t,n){for(var e in n)t[e]=n[e]},e.fork=function(t,n,e){var i=!e;return function(e,r){var o=this;return Promise.resolve(t(e,r)).then(function(t){!!t===i&&n.call(o,e,r)})}},e.locIndex=function(t,n){var i=e.fork(t,function(t,e){n.call(this,e)});return this.consume(i,-1)},e.matchIndex=function(t,n){return e.locIndex.call(this,function(n){return t===n},n)},e.noop=function(){},e.pushOne=function(t){this.push(t)},e.inherits=function(t,n,i){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,e.extend(t,n),i&&e.extend(t.prototype,i)},e.thrower=function(t){throw new Error(t)}},{}],index:[function(t,n){n.exports={Relay:t("./Relay"),Flood:t("./Flood")}},{"./Flood":1,"./Relay":3}]},{},[]);